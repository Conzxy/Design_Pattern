# 建造者模式（Builder）

## 特征

* 创建型设计模式

* 分步骤创建复杂对象，使用相同的创建代码生成不同类型和形式的对象

## 问题

假设有一个复杂对象，构造它需要诸多成员变量和嵌套对象进行繁复的初始化工作，这样的初始化代码通常藏于一个包含众多参数的构造函数中，甚至散落在客户端代码的多个位置。

思考建个`房屋（house）`对象，则需要建造四面墙和地板，......，但是建好了之后想要一栋更宽敞更明亮且带有院子和其他设施的房屋，你会怎么办？

* 扩展子类，则子类数目会相当多，层次复杂

* 基类设置一个包含所有可能参数的超级构造函数，但是过于浪费

## 解决方案

将对象构造代码从产品类中抽取出来，放入一个名为**建造者**的独立对象中，将构造过程划分成一组步骤。每次创建对象，不需要调用所有步骤，而只需调用特定对象需要的那些步骤即可。

当你需要创建不同形式的产品时，其中的构造步骤可能需要不同的实现。比如，木屋的房门需要用木头，而城堡的房门可能要用石头或其他材料。这种情况就可以创建不同的建造者，用不同方式实现一组相同的建造步骤，然后在创建过程中使用来生成不同类型的对象。

## 结构

![](https://img-blog.csdnimg.cn/20201101132416267.png)

* **建造者**：声明所有类型建造者中通用的产品构造步骤

* **具体建造者**：提供构造过程的不同实现

* **产品**：最终生成的对象。由不同建造者构造的产品无需属于同一类层次结构或接口

* **主管**：定义调用构造步骤的顺序，这样可以创建和复用特定的产品配置

* **客户端**：将建造者对象与主管类关联。通过主管类构造函数的参数一次性关联即可。主管类不是必须的，也可以直接通过建造者对象进行构造。

## [Sample Code](https://github.com/Conzxy/Design_Pattern/blob/main/Builder.h)

## 适用场景

* 避免 **“重叠构造函数”**

* 创建不同形式的产品

* 构造组合树或其他复杂对象
